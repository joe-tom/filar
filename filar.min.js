(function(g){function e(a){this.maxSize=a.maxSize||1E7;this.config={chunkSize:a.chunkSize};return this}e.prototype.attachImage=function(a,b){var d=this,f=a instanceof Node?a:document.getElementById(a),c=document.createElement("input");this.setInput(c,f,!0);c.addEventListener("change",function(){[].forEach.call(c.files,function(a){if(a.type.match("image.*")){var c=new FileReader;c.onload=function(c){b.done&&b.done(d.chunk(a,c.target.result))};c.readAsDataURL(a)}else b.error&&b.error({code:1,error:"Not Image"})})})};
e.prototype.attachFile=function(a,b){var d=this,f=document.getElementById(a),c=document.createElement("input");this.setInput(c,f,!1);c.addEventListener("change",function(){[].forEach.call(c.files,function(a){var c=new FileReader;c.onload=function(c){b.done&&b.done(d.chunk(a,c.target.result))};c.readAsDataURL(a)})})};e.prototype.setInput=function(a,b,d){a.type="file";a.multiple="true";d&&(a.accept="image/*");b.style.display="none";d=g.getComputedStyle(b).cssText;a.style.cssText=d;b.style.display="block";
a.style.display="block";a.style.opacity="0";a.style.zIndex=1E4;b.parentNode.insertBefore(a,b)};e.prototype.chunk=function(a,b){b=b.split(",")[1];var d={fileName:a.name,fileSize:a.size,chunkSize:this.config.chunkSize,chunkAmount:0,fileType:a.type,fileExtension:""},f={header:d,full:b,data:[]};1<d.fileName.split(".").length&&(d.fileExtension=d.fileName.split(".").pop());if(b<=CHUNK_SIZE)return f.data=[b],f;for(var c=b,e=CHUNK_SIZE,g=Math.ceil(c.length/e),l=Array(g),k,h=0;h<g;h++)k=h*e,l[h]=c.substring(k,
k+e);f.data=l;d.chunkAmount=f.data.length;return f};g.Filar=e})(window);